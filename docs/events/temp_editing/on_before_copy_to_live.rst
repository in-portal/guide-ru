OnBeforeCopyToLive
==================
`Data Source`_

Данное событие вызывается индивидуально для каждой записи перед тем, как она будет скопирована
из :doc:`временной таблицы </database/using_temporary_tables>` в оригинальную.

Вызывается из событий
---------------------

Данное событие косвенно (через метод ``kTempTablesHandler::DoCopyTempToOriginal``) вызывается
из события :doc:`/events/temp_editing/on_save` в процессе копирования данных из
:doc:`временной таблицы </database/using_temporary_tables>` в оригинальную.

Входные параметры
-----------------

+----------------------------------------+---------------------------------------------------------------------+
| название                               | описание                                                            |
+========================================+=====================================================================+
| .. config-property::                   | ``ID`` записи во                                                    |
|    :name: id                           | :doc:`временной таблице </database/using_temporary_tables>`.        |
|    :type: int                          | Данное ``ID`` будет отрицательным (для                              |
|    :ref_prefix: ep_OnBeforeCopyToLive_ | :doc:`подчинённых записей </components/working_with_sub_prefixes>`) |
|                                        | или нулём (для                                                      |
|                                        | :doc:`главных записей </components/working_with_sub_prefixes>`)     |
|                                        | в случае, когда запись была создана во временной таблице и ещё не   |
|                                        | была скопирована в оригинальную таблицу.                            |
+----------------------------------------+---------------------------------------------------------------------+

.. note::

   Объекты, которые будут получены из событий, вызываемых из класса ``kTempTablesHandler`` никогда не
   содержат достоверной информации.

Поэтому в случае, когда нужен объект, загруженный по ``ID`` скопированной записи, то его нужно загружать
самому. Это будет показано на ниже приведённом примере.

.. code:: php

   $object =& $this->Application->recallObject($event->Prefix . '.-item', null, Array ('skip_autoload' => true));
   /* @var $object kDBItem */

   $object->Load( $event->getEventParam('id') );

Потенциальное применение
------------------------

Данное событие можно применять для окончательной обработки данных во
:doc:`временных таблицах </database/using_temporary_tables>` перед их копированием в оригинальную
таблицу.

Ограничения
-----------

Данное событие будет вызываться только при использовании события :doc:`/events/temp_editing/on_save`, и
следовательно будет работать только в случае, когда используются
:doc:`временные таблицы </database/using_temporary_tables>`.

.. seealso::

   - :doc:`/database/using_temporary_tables`

.. _Data Source: http://guide.in-portal.org/rus/index.php/EventHandler:OnBeforeCopyToLive
