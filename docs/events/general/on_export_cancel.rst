OnExportCancel
==============
`Data Source`_


Событие **OnExportCancel** применяется только в административной консоли. Данное событие вызывается тогда,
когда в процессе импорта (или экспорта) на экране с индикатором прогресса импорта (или экспорта) пользователь
нажимает кнопку ``Cancel``.

Вызывается из шаблона
---------------------

Вызывается из шаблона прогресса импорта (или экспорта).

Вызывает события
----------------

Из данного события вызывается событие :doc:`/events/live_editing/on_go_back`, в результате которого
происходит перенаправление на предыдущий шаблон, в данном случае это шаблон с настройками импорта
(или экспорта). Если в сессии задана переменная ``export_finish_url`` (полный путь к странице), то
перенаправление происходит туда.

.. include:: /includes/needs_refactoring.rst

.. caution::

   Т.к. событие :doc:`/events/live_editing/on_go_back` на прямую с импортом (или экспортом) не связано,
   то использование в нём переменной с названием "export_finish_url" только запутывает код.

   Возможны 2 решения проблемы:

   - если данная переменная также ставиться и не в процессе импорта (или экспорта), то нужно изменить
     её название;
   - если данная переменная больше нигде кроме импорта (или экспорта) не используется, то код её
     проверяющий нужно вынести в событие **OnExportCancel**.

Потенциальное применение
------------------------

Это событие можно использовать для выполнения дополнительных действий, необходимых в случае преждевременной
остановки процесса импорта (или экспорта). Например, если недопустим частичный импорт данных, то данные,
импортированные до прерывания операции можно удалить из системы - чтобы не произошло дублирования при
последующем импорте.

.. _Data Source: http://guide.in-portal.org/rus/index.php/EventHandler:OnExportCancel
